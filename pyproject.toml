# Ruff Linter Configuration for Telegram Education Bot
# Ruff is a fast Python linter written in Rust

[lint]
# Enable pycodestyle (E), Pyflakes (F), and isort (I) rules
select = ["E", "F", "I", "W", "N", "YTT", "ASYNC", "C4", "T20", "RUF", "UP", "B", "A", "COM", "DTZ", "FBT", "PL", "PIE", "TID"]

# Ignore specific rules that are too strict or not applicable
ignore = [
    "E501",  # Line too long (handled by formatter)
    "PLR0913",  # Too many arguments
    "PLR0912",  # Too many branches
    "PLR0915",  # Too many statements
    "PLR2004",  # Magic value comparison
    "PLW0603",  # Global statement
    "N802",  # Function name should be lowercase (handlers need exact names)
    "N803",  # Argument name should be lowercase
    "PLR0913",  # Too many arguments
    "COM812",  # Missing trailing comma (conflicts with formatter)
]

# Fixable rules
[lint.fixable]
all = ["A", "B", "C", "D", "E", "F", "I", "N", "PL", "PT", "P", "Q", "RUF", "S", "T", "U", "UP", "V", "W", "YTT"]

# Exclude patterns
[lint.exclude]
patterns = [
    "__pycache__",
    "*.pyc",
    ".git",
    "venv",
    "venv_test",
    ".env",
    "docs/k8s",
]

# Per-file exclusions
[lint.per-file-ignores]
"tests/*" = ["E402", "F401"]  # Allow imports at top level issues in tests
"__init__.py" = ["F401"]  # Allow unused imports in __init__.py
"handlers/__init__.py" = ["F401"]
"services/__init__.py" = ["F401"]
"database/__init__.py" = ["F401"]
"config/__init__.py" = ["F401"]
"utils/__init__.py" = ["F401"]

# Line length
line-length = 100

# Target versions
target-version = "py312"

[lint.isort]
# Known first-party modules
known-first-party = ["config", "database", "handlers", "services", "utils"]
# Add required imports for aiogram
force-single-line = false
